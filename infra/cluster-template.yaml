kind: Cluster
name: talos-default
talos:
  version: v1.11.3
kubernetes:
  version: 1.34.1
features:
  enableWorkloadProxy: true
patches:
  - name: kubespan-enabled
    inline:
      machine:
        network:
          kubespan:
            enabled: true
  - name: cni
    file: patches/cni.yaml
systemExtensions:
  - siderolabs/iscsi-tools
  - siderolabs/util-linux-tools
  - siderolabs/vmtoolsd-guest-agent
---
kind: ControlPlane
machineClass:
  name: k8s-rumc-01-nodes
  size: 3
patches:
  - name: scheduling
    file: patches/scheduling.yaml
  - name: cilium
    file: patches/cilium.yaml
  - name: argocd
    file: patches/argocd.yaml
  - name: longhorn
    file: patches/longhorn.yaml
  - name: monitoring
    file: patches/monitoring.yaml
---
kind: Workers
name: workers
machineClass:
  name: k8s-rumc-01-workers
  size: unlimited
